<head><script src="https://cdn.ckeditor.com/ckeditor5/11.1.1/decoupled-document/ckeditor.js"></script></head>
<h1>Create a new Wiki page</h1>

<%= form_for @page, url: wiki_page_index_url do |form| %>
  <%= form.fields_for :revisions, Revision.new do |ff| %>
  <div>
    <%= ff.label :title %>
    <%= ff.text_field :title %>

    <%= ff.label :content %>
    <%= ff.text_field :content %>
  </div>

<div id="toolbar-container"></div>

    <!-- This container will become the editable. -->
    <div id="editor">
        <p>This is the initial editor content.</p>
    </div>
<script>
    DecoupledEditor
        .create( document.querySelector( '#editor' ) )
        .then( editor => {
            const toolbarContainer = document.querySelector( '#toolbar-container' );

            toolbarContainer.appendChild( editor.ui.view.toolbar.element );
        } )
        .catch( error => {
            console.error( error );
        } );
</script>

<% end %>

  <%= form.submit 'Create Page' %>
<% end %>

<%= link_to 'Back', wiki_page_index_url %>
